name: Module Test Run

on:
  workflow_dispatch:
    inputs:
      module_name:
        description: 'Specific module to test (leave empty to test all modules)'
        required: false
        type: string
        default: ''
  schedule:
    # Run monthly on the 1st at midnight UTC
    - cron: '0 0 1 * *'
  pull_request:
    types: [opened, reopened, synchronize]
    paths:
      - 'modules/**/*.wdl'
      - 'modules/**/*.json'

permissions:
  contents: read

jobs:
  test-modules:
    uses: ./.github/workflows/testrun-reusable.yml
    with:
      item_type: modules
      item_name: ${{ github.event.inputs.module_name || '' }}
